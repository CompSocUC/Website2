"use strict";var debounce=function(e,t){var n=!1;return function(){var r=this,a=arguments;n===!1&&(n=!0,e.apply(r,a),setTimeout(function(){n=!1},t))}},pretty_date=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=new Date(e),a=function(e){return 12===e?[e,!0]:e>12?[e-12,!0]:[e,!1]}(r.getHours()),o=function(e){return 1===e.length?"0"+e:e}(String(r.getMinutes())),s=n[r.getDay()]+", "+r.getDate()+" "+t[r.getMonth()]+", "+a[0]+":"+o+(a[1]?"pm":"am");return s},create_event=function(e,t,n,r){var a=document.createElement("span");a.setAttribute("class","title"),a.innerHTML=e;var o=document.createElement("span");o.setAttribute("class","time"),o.innerHTML=pretty_date(n);var s=document.createElement("a");s.setAttribute("class","link"),s.setAttribute("href","https://www.facebook.com/events/"+t+"/"),s.setAttribute("target","_blank"),s.appendChild(a);var l=document.createElement("div");0===r.offset_x&&(r.offset_x=50),0===r.offset_y&&(r.offset_y=50),l.setAttribute("class","img"),l.setAttribute("style","background-image: url("+r.source+"); background-position: "+r.offset_x+"% "+r.offset_y+"%"),l.setAttribute("alt",e);var c=document.createElement("div");return c.setAttribute("class","event"),c.appendChild(l),c.appendChild(s),c.appendChild(o),c},set_dot=function(e){$(".dot").each(function(t,n){$(n).removeClass("active"),t===e&&$(n).addClass("active")})},animate_rollover=function(e,t,n,r){var a=(r+1)%n,o=(a+1)%n,s=e.children(),l=s[0],c=s[1];return l.style.left="-100%",c.style.left="0",setTimeout(function(){e[0].removeChild(l),l.style.left="0",e.append(t[o]);var n=e.children()[1];n.style.left="100%"},500),set_dot(a),a},setup_rollover=function(e,t){var n,r,a,o,s,l,c,i,u,d=$("#event-scroll");d.html("");var v=$(e.data).map(function(e,n){var d=create_event(n.name,n.id,n.start_time,n.cover);$(d).on("touchstart",function(e){clearInterval(a),o=!1,c=$(this).css("transition"),$(this).css("transition","none"),setTimeout(function(){o=!0},50),s=e.originalEvent.touches[0].pageX,l=s,console.log(s)}),$(d).on("touchmove",function(e){e.preventDefault(),l=e.originalEvent.touches[0].pageX,console.log(l),$(this).css("transform","translate3d("+(l-s)+"px,0,0)")});var v=function(e){var n=function(e,t){setTimeout(function(){$(e).css("transform","translate3d(0,0,0)")},t)},d=.3*document.body.offsetWidth;$(this).css("transition",c),o===!0?s-l>d?(console.log("Right"),n(this,500),i(e)):l-s>d?(console.log("Left"),n(this,500),u(e)):n(this,0):n(this,0),s=0,l=0,a||(a=setInterval(r,t))};return $(d).on("touchend",v),$(d).on("touchcancel",v),d});console.log(.2*document.body.offsetWidth);var f=v.length;console.log(v),v=v.get().reverse(),d.append(v[0]),d.append(v[1]);var p=d.children()[0],m=d.children()[1];p.style.left="0",m.style.left="100%",n=0,i=debounce(function(e){return e.preventDefault(),clearInterval(a),n=animate_rollover(d,v,f,n),a=setInterval(r,t),!1},500),u=debounce(function(e){e.preventDefault(),clearInterval(a),n=(n-1+f)%f;var o=d.children(),s=o[0],l=o[1];d[0].removeChild(l),l.style.left="0";var c=v[n];return c.style.left="-100%",d.prepend(c),setTimeout(function(){s.style.left="100%",c.style.left="0"},1),set_dot(n),a=setInterval(r,t),!1},500),$("#next-arrow").on("click",i),$("#prev-arrow").on("click",u),$(".dot").each(function(e,n){$(n).on("click",debounce(function(n){n.preventDefault(),clearInterval(a);var o=d.children(),s=o[0],l=o[1];d[0].removeChild(l),l.style.left="0";var c=v[e];return c.style.left="100%",d.append(c),setTimeout(function(){s.style.left="-100%",c.style.left="0",setTimeout(function(){d[0].removeChild(s),s.style.left="0";var t=(e+1)%f,n=v[t];n.style.left="100%",d.append(n)},500)},1),set_dot(e),a=setInterval(r,t),!1},500))})},setup_arrows=function(e){var t=document.createElement("a");t.setAttribute("class","next-arrow"),t.setAttribute("id","next-arrow"),t.setAttribute("href","#"),t.innerHTML="Next";var n=document.createElement("a");n.setAttribute("class","prev-arrow"),n.setAttribute("id","prev-arrow"),n.setAttribute("href","#"),n.innerHTML="Previous",e.append(n),e.append(t)},setup_dots=function(e,t){var n=document.createElement("div");n.setAttribute("class","dots");for(var r=0;t>r;r++){var a=document.createElement("a");0===r?a.setAttribute("class","dot active"):a.setAttribute("class","dot"),a.setAttribute("href","#"),a.innerHTML=String(r),n.appendChild(a)}e.append(n)},show_single=function(e){var t=e.data[0],n=$("#event-scroll");n.append(create_event(t.name,t.id,t.start_time,t.cover))},event_callback=function(e){var t=$("#event-holder");0===e.data.length?(t.addClass("text"),t.html("<p>There are no upcoming events.</p>"),t.css("padding-bottom","0"),t.css("margin-top",0)):1===e.data.length?(t.css("padding-bottom","calc(37% + 7rem)"),show_single(e)):(t.css("padding-bottom","calc(37% + 7rem)"),setup_arrows(t),setup_dots(t,e.data.length),setup_rollover(e,5e3))};$(function(){$(document).ready(function(){$.ajax({dataType:"json",url:"resources/event-loader.php",success:event_callback})})});
